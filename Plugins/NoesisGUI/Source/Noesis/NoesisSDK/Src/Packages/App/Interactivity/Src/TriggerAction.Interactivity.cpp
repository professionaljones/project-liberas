////////////////////////////////////////////////////////////////////////////////////////////////////
// NoesisGUI - http://www.noesisengine.com
// Copyright (c) 2013 Noesis Technologies S.L. All Rights Reserved.
////////////////////////////////////////////////////////////////////////////////////////////////////


#include <NsApp/TriggerAction.h>
#include <NsGui/DependencyData.h>
#include <NsGui/PropertyMetadata.h>
#include <NsCore/ReflectionImplement.h>


using namespace Noesis;
using namespace NoesisApp;


////////////////////////////////////////////////////////////////////////////////////////////////////
NoesisApp::TriggerAction::TriggerAction(const TypeClass* associatedType):
    AttachableObject(associatedType)
{
}

////////////////////////////////////////////////////////////////////////////////////////////////////
NoesisApp::TriggerAction::~TriggerAction()
{
}

////////////////////////////////////////////////////////////////////////////////////////////////////
bool NoesisApp::TriggerAction::GetIsEnabled() const
{
    return GetValue<bool>(IsEnabledProperty);
}

////////////////////////////////////////////////////////////////////////////////////////////////////
void NoesisApp::TriggerAction::SetIsEnabled(bool isEnabled)
{
    SetValue<bool>(IsEnabledProperty, isEnabled);
}

////////////////////////////////////////////////////////////////////////////////////////////////////
void NoesisApp::TriggerAction::CallInvoke(BaseComponent* parameter)
{
    if (GetIsEnabled())
    {
        Invoke(parameter);
    }
}

////////////////////////////////////////////////////////////////////////////////////////////////////
Ptr<NoesisApp::TriggerAction> NoesisApp::TriggerAction::Clone() const
{
    return StaticPtrCast<TriggerAction>(Freezable::Clone());
}

////////////////////////////////////////////////////////////////////////////////////////////////////
Ptr<NoesisApp::TriggerAction> NoesisApp::TriggerAction::CloneCurrentValue() const
{
    return StaticPtrCast<TriggerAction>(Freezable::CloneCurrentValue());
}

////////////////////////////////////////////////////////////////////////////////////////////////////
NS_BEGIN_COLD_REGION

NS_IMPLEMENT_REFLECTION(NoesisApp::TriggerAction)
{
    NsMeta<TypeId>("NoesisApp.TriggerAction");

    DependencyData* data = NsMeta<DependencyData>(TypeOf<SelfClass>());
    data->RegisterProperty<bool>(IsEnabledProperty, "IsEnabled", PropertyMetadata::Create(true));
}

////////////////////////////////////////////////////////////////////////////////////////////////////
const DependencyProperty* NoesisApp::TriggerAction::IsEnabledProperty;
